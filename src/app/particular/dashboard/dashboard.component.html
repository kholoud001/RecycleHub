<div class="min-h-screen bg-gray-100">

  <!-- Navbar -->
  <nav class="bg-blue-600 p-4 shadow-md">
    <div class="container mx-auto flex justify-between items-center">
      <a href="#" class="text-white font-bold text-xl">Dashboard</a>
      <ul class="flex space-x-6">
        <li><button (click)="setPage('myRequests')" class="text-white hover:text-gray-300">Mes demandes</button></li>
        <li><button (click)="setPage('profile')" class="text-white hover:text-gray-300">Profil</button></li>
        <li><button (click)="setPage('points')" class="text-white hover:text-gray-300">Mes points</button></li>
        <li><button (click)="logout()" class="text-white hover:text-gray-300">Se déconnecter</button></li>
      </ul>
    </div>
  </nav>

  <!-- Content -->
  <div class="container mx-auto mt-6">
    <div class="bg-white p-6 rounded-lg shadow-md">
      <h2 class="text-2xl font-bold mb-4">Bienvenue, {{ connectedUser?.nom }}!</h2>

      <!-- My Requests Section -->
      <div *ngIf="currentPage === 'myRequests'">
        <h3 class="text-xl font-semibold mb-4">Mes demandes Requests</h3>
        <p class="text-gray-700">Here you can view and manage your requests.</p>
      </div>

      <!-- 📝 Profil -->
      <div *ngIf="currentPage === 'profile'">
        <h3 class="text-xl font-semibold mb-4">👤 Profil</h3>

        <!-- Profile Image -->
        <div class="flex items-center space-x-4">
          <img *ngIf="connectedUser.photo"
               [src]="connectedUser.photo"
               alt="Photo de profil"
               class="w-24 h-24 rounded-full border border-gray-300 shadow-md object-cover">

        </div>

        <!-- Mode édition -->
        <div *ngIf="isEditing; else profileView">
          <label class="block">Nom :</label>
          <input type="text" [(ngModel)]="updatedUser.nom" class="border p-2 w-full rounded-md mb-2">

          <label class="block">Prénom :</label>
          <input type="text" [(ngModel)]="updatedUser.prenom" class="border p-2 w-full rounded-md mb-2">

          <label class="block">Email :</label>
          <input type="email" [(ngModel)]="updatedUser.email" class="border p-2 w-full rounded-md mb-2">

          <label class="block">Téléphone :</label>
          <input type="text" [(ngModel)]="updatedUser.telephone" class="border p-2 w-full rounded-md mb-2">

          <label class="block">Adresse :</label>
          <input type="text" [(ngModel)]="updatedUser.adresse" class="border p-2 w-full rounded-md mb-2">


          <button (click)="saveProfile()" class="bg-green-500 text-white px-4 py-2 rounded-md mr-2">✅ Sauvegarder</button>
          <button (click)="cancelEdit()" class="bg-gray-400 text-white px-4 py-2 rounded-md">❌ Annuler</button>
        </div>

        <!-- Affichage du profil -->

        <ng-template #profileView>
          <p><strong>Nom :</strong> {{ connectedUser.nom }}</p>
          <p><strong>Prénom :</strong> {{ connectedUser.prenom }}</p>
          <p><strong>Email :</strong> {{ connectedUser.email }}</p>
          <p><strong>Téléphone :</strong> {{ connectedUser.telephone }}</p>

          <button (click)="editProfile()" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded-md mr-4">✏️ Modifier</button>
          <button (click)="deleteAccount()" class="mt-4 bg-red-600 text-white px-4 py-2 rounded-md">🗑️ Supprimer</button>

        </ng-template>
      </div>



      <!-- Points System Section -->
      <div *ngIf="currentPage === 'points'">
        <h3 class="text-xl font-semibold mb-4">🏆 Système de points</h3>
        <p class="text-gray-700">Vos points accumulés en tant que collecteur.</p>
        <div class="mt-4 p-4 bg-yellow-100 border-l-4 border-yellow-500">
          <h4 class="text-lg font-semibold">Points actuels : <span class="text-blue-600">{{ connectedUser?.points || 0 }}</span></h4>
        </div>
      </div>
    </div>
  </div>
</div>
